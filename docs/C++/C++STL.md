# C++STL

C++ STL（标准模板库）是一套功能强大的 C++ 模板类，提供了通用的模板类和函数，这些模板类和函数可以实现多种流行和常用的算法和数据结构，如向量、链表、队列、栈。

## 六大组件

STL提供了六大组件，彼此之间可以组合套用，这六大组件分别是:容器、算法、迭代器、仿函数、适配器（配接器）、空间配置器。

### 容器

各种数据结构，如vector、list、deque、set、map等,用来存放数据。

从实现角度来看，STL容器是一种class template。

STL中的容器有序列式容器、关联容器、容器适配器、位集（bit_set）、串包(string_package)等等。

1.  **序列式容器（Sequence containers）**：每个元素都有固定位置，它取决于插入时机和地点，和元素值无关

    *   Vector：将元素置于一个动态数组中加以管理，可以随机存取元素（用索引直接存取），数组尾部添加或移除元素非常快速。但是在中部或头部安插元素比较费时；

    *   Deque：是“double-ended queue”的缩写，可以随机存取元素（用索引直接存取），数组头部和尾部添加或移除元素都非常快速。但是在中部或头部安插元素比较费时；

    *   List：双向链表，不提供随机存取（按顺序走到需存取的元素，O(n)），在任何位置上执行插入或删除动作都非常迅速，内部只需调整一下指针；

2.  **关联式容器（Associated containers）**：元素位置取决于特定的排序准则，和插入顺序无关

    *   Set/Multiset：内部的元素依据其值自动排序，Set内的相同数值的元素只能出现一次，Multisets内可包含多个数值相同的元素，内部由二叉树实现，便于查找；
    *   Map/Multimap：Map的元素是成对的键值/实值，内部的元素依据其值自动排序，Map内的相同数值的元素只能出现一次，Multimaps内可包含多个数值相同的元素，内部由二叉树实现，便于查找；

容器类自动申请和释放内存，无需new和delete操作。

### 算法

各种常用的算法，如sort、find、copy、for_each。

从实现的角度来看，STL算法是一种function tempalte。

算法部分主要由头文件\<algorithm>，\<numeric>和\<functional>组成。

*   \<algorithm>是所有STL头文件中最大的一个（尽管它很好理解），它是由一大堆模版函数组成的，可以认为每个函数在很大程度上都是独立的，其中常用到的功能范围涉及到比较、交换、查找、遍历操作、复制、修改、移除、反转、排序、合并等等。
*   \<numeric>体积很小，只包括几个在序列上面进行简单数学运算的模板函数，包括加法和乘法在序列上的一些操作。
*   \<functional>中则定义了一些模板类，用以声明函数对象。

STL中算法大致分为四类：

*   非可变序列算法：指不直接修改其所操作的容器内容的算法。
*   可变序列算法：指可以修改它们所操作的容器内容的算法。
*   排序算法：对序列进行排序和合并的算法、搜索算法以及有序序列上的集合操作。
*   数值算法：对容器内容进行数值计算。

### 迭代器

Iterator模式是运用于聚合对象的一种模式，通过运用该模式，使得我们可以在不知道对象内部表示的情况下，按照一定顺序（由iterator提供的方法）访问聚合对象中的各个元素。

能够让迭代器与算法不干扰的相互发展，最后又能无间隙的粘合起来，重载了*，＋＋，＝＝，！＝，＝运算符。

用以操作复杂的数据结构，容器提供迭代器，算法使用迭代器。

常见的一些迭代器类型：iterator、const_iterator、reverse_iterator、const_reverse_iterator。

### 仿函数

行为类似函数，可作为算法的某种策略。

从实现角度来看，仿函数是一种重载了operator()的class 或者class template。

### 适配器

一种用来修饰容器或者仿函数或迭代器接口的东西。

### 空间配置器

负责空间的配置与管理。从实现角度看，配置器是一个实现了动态空间配置、空间管理、空间释放的class tempalte.

STL六大组件的交互关系，容器通过空间配置器取得数据存储空间，算法通过迭代器存储容器中的内容，仿函数可以协助算法完成不同的策略的变化，适配器可以修饰仿函数。

## STL的优点

STL 是 C++的一部分，因此不用额外安装什么，它被内建在编译器之内。

STL 的一个重要特性是将数据和操作分离。数据由容器类别加以管理，操作则由可定制的算法定义。迭代器在两者之间充当“粘合剂”，以使算法可以和容器交互运作。

程序员可以不用思考 STL 具体的实现过程，只要能够熟练使用 STL 就 OK 了。这样他们就可以把精力放在程序开发的别的方面。

STL 具有高可重用性，高性能，高移植性，跨平台的优点。

*   高可重用性：STL 中几乎所有的代码都采用了模板类和模版函数的方式实现，这相比于传统的由函数和类组成的库来说提供了更好的代码重用机会。
*   高性能：如 map 可以高效地从十万条记录里面查找出指定的记录，因为 map 是采用红黑树的变体实现的。
*   高移植性：如在项目 A 上用 STL 编写的模块，可以直接移植到项目 B 上。

